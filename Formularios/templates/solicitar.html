{% load staticfiles %}
<!DOCTYPE html> <html lang="es"> <head> <meta charset="utf-8"> <title>Catálogo de Datos Abiertos</title> <meta name="description" content=""> <meta name="viewport" content="width=device-width"> <!-- Place favicon.ico and apple-touch-icon.png in the root directory --> <link rel="shortcut icon" href="img/favicon.ico"> <link rel="stylesheet" href="{% static "css/vendor.2107989e.css" %}"> <link rel="stylesheet" href="{% static "css/style.4a96c47a.css" %}"> <link rel="import" href="{% static "bower_components/polymer/polymer.html" %}"> <link rel="import" href="{% static "bower_components/dgm-navbar/dgm-navbar.html" %}"> <link rel="import" href="{% static "bower_components/dgm-footer/dgm-footer.html" %}"> <body> <dgm-navbar></dgm-navbar> <div class="container-fluid" style="margin-top:20px"> <div class="row"> <div class="col-md-12"> <h1>Solicitar un Conjunto | <strong class="text-higlight">BETA</strong></h1> <div id="report-container" class="row"> <div class="col-md-8"> <p>Esta no es una solicitud de transparencia al INAI.</p> <p>Al llenar este formulario nos ayudarás a entender y definir la prioridad con la que se publican y trabajan los datos publicados en datos.gob.mx. Agradecemos su participación con el fin de mejorar la calidad y/o disponibilidad de los Datos Abiertos a través de esta retroalimentación.</p> <p>Sus datos personales no son obligatorios para este formulario aunque dejar su nombre y correo electrónico pueden ayudar a darle seguimiento al reporte. Para obtener detalles adicionales, consulte nuestra política de privacidad.</p> <form id="requestForm"> <div class="form-group"> <label for="url">Institución generadora</label> <input type="text" name="url" class="form-control" value="" disabled id="instInput"> </div> <div class="form-group"> <label for="dataset">Nombre del conjunto de datos</label> <input type="text" name="dataset" class="form-control" id="datos"> </div> <div class="form-group"> <label for="description">Descripción del conjunto de datos</label> <textarea rows="4" name="description" class="form-control" id="descripcion"></textarea> </div> <div class="form-group hidden"> <label for="type">Tipo de datos</label> <div> <label class="radio-inline"> <input type="radio" name="type" value="table"> Tabla </label> <label class="radio-inline"> <input type="radio" name="type" value="map"> Mapa </label> <label class="radio-inline"> <input type="radio" name="type" value="text"> Texto </label> </div> </div> <div class="form-group hidden"> <label for="temporary_resolution">Resolución temporal</label> <div class="custom-select"> <select name="temporary_resolution" class="form-control"> <option>Selecciona una resolución </select> </div> </div> <div class="form-group hidden"> <label for="geographic_resolution">Resolución geografica</label> <div class="custom-select"> <select name="geographic_resolution" class="form-control"> <option>Selecciona una resolución </select> </div> </div> <div class="form-group hidden"> <label>Rango de fechas</label> <div class="row"> <div class="col-md-4"> <div class="form-group"> <label for="from">Desde</label> <div class="input-group"> <input type="text" name="from" class="form-control datepicker" placeholder="dd/mm/aaaa"> <div class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></div> </div> </div> </div> <div class="col-md-4"> <div class="form-group"> <label for="to">Hasta</label> <div class="input-group"> <input type="text" name="to" class="form-control datepicker" placeholder="dd/mm/aaaa"> <div class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></div> </div> </div> </div> </div> </div> <h2><strong>Datos de Contacto</strong> | Opcional</h2> <div class="form-group"> <label for="name">Nombre</label> <input type="text" for="name" class="form-control" id="nombre"> </div> <div class="form-group"> <label for="last_name">Apellido</label> <input type="text" for="last_name" class="form-control" id="apellido"> </div> <div class="form-group"> <label for="email">Correo electrónico</label> <input type="emal" for="email" class="form-control" id="correo"> </div> <button type="submit" class="btn btn-primary">Enviar</button> <p><a href="privacy.html">Consulta nuestro aviso de privacidad</a></p> </form> </div> </div> </div> </div> </div> <dgm-footer></dgm-footer> <script src="{% static "js/vendor.50182432.js" %}"></script> <script type="text/javascript">$( document ).ready( function () {
                $( '.datepicker' ).datepicker({
                    format  : 'dd/mm/yyyy'
                });
            });</script> <script type="text/javascript">$('#instInput').val(window.location.href.split('?')[1].replace('organization=',''));

        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        var csrftoken = getCookie('csrftoken');

        function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }
        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });

        $('#requestForm').formValidation({
          framework: 'bootstrap',
          fields : {
            datos : {
              selector: '#datos',
              validators : {
                notEmpty : {
                  message : 'Este campo es obligatorio'
                }
              }
            },
            descripcion : {
              selector: '#descripcion',
              validators : {
                notEmpty : {
                  message : 'Este campo es obligatorio'
                }
              }
            },
          }
        })
        .on('err.field.fv', function(e, data) {
          data.fv.disableSubmitButtons(false);
        })
        .on('success.field.fv', function(e,data) {
          data.fv.disableSubmitButtons(false);
        })
        .on('success.form.fv', function(e, data) {

          e.preventDefault();
          swal({confirmButtonText: "CERRAR", title: "Muchas gracias por tu participación", type: "success" });

          /*

          var instContent = $('#instInput').val();
          var datosContent = $('#datos').val();
          var descContent = $('#descripcion').val();
          var nombreContent = $('#nombre').val();
          var apContent = $('#apellido').val();
          var correoContent = $('#correo').val();

          $.post('/send/', {
              from: "Reporte DGM <reporte@participa.gob.mx>",
              to: "escuadron@datos.gob.mx",
              subject: "Reporte DGM (D113)",
              html: "<p><strong>Institución generadora: </strong><span>" + instContent +"</span></p><br/><p><strong>Nombre del conjunto de datos: </strong><span>" + datosContent +"</span></p><br/><p><strong>Descripción del conjunto de datos: </strong><span>" + descContent +"</span></p><br/><p><strong>Nombre: </strong><span>" + nombreContent +"</span></p><br/><p><strong>Apellido: </strong><span>" + apContent +"</span></p><br/><p><strong>Correo: </strong><span>" + correoContent +"</span></p><br/>"
            }).done(function(response){
                if(response.message == 'ok'){
                    swal({confirmButtonText: "CERRAR", title: "Muchas gracias por tu participación", type: "success" });
                } else {
                    swal({confirmButtonText: "ACEPTAR", title: "Error", text: "Por favor intentalo nuevamente.", type: "error" });
                }
            }).fail(function(){
                swal({
                  confirmButtonText: "ACEPTAR",
                  title: "Error",
                  text: "Por favor intentalo nuevamente.",
                  type: "error" });
            });
          */
    })</script>  